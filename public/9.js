(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{214:function(t,e,r){"use strict";r.r(e);var a=r(154),s=r.n(a),o=r(155),n=r.n(o),i=r(156),l=r.n(i),c=r(157),u=r.n(c);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={props:["endpoint"],data:function(){return{response:{table:null,displayable:[],appendable:[],updateable:[],createable:[],custom_columns:[],data:[],meta:[],allow:{}},sort:{key:"id",order:"asc"},limit:15,quickSearchQuery:"",editing:{id:null,form:{},errors:[]},search:{value:"",operator:"equals",column:"id"},creating:{active:!1,form:{},errors:[]},selected:[]}},computed:{filteredRecords:function(){var t=this,e=this.response.data;return e=e.filter((function(e){return Object.keys(e).some((function(r){return String(e[r]).toLowerCase().indexOf(t.quickSearchQuery.toLowerCase())>-1}))})),this.sort.key&&(e=l()(e,(function(e){var r=e[t.sort.key];return isNaN(parseFloat(r))?String(e[t.sort.key]).toLowerCase():parseFloat(r)}),this.sort.order)),e},canSelectItems:function(){return this.filteredRecords.length<=500}},methods:{getRecords:function(){var t=this;return axios.get("".concat(this.endpoint,"?").concat(this.getQueryParameters())).then((function(e){t.response=e.data}))},getQueryParameters:function(){return s.a.stringify(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({limit:this.limit},this.search))},sortBy:function(t){this.sort.key=t,this.sort.order="asc"==this.sort.order?"desc":"asc"},edit:function(t){this.editing.errors=[],this.editing.id=t.id,this.editing.form=u()(t,this.response.updateable)},update:function(){var t=this;axios.put("".concat(this.endpoint,"/").concat(this.editing.id),this.editing.form).then((function(){t.getRecords().then((function(){t.editing.id=null,t.editing.form={}}))})).catch((function(e){t.editing.errors=e.response.data.errors}))},store:function(){var t=this;axios.post("".concat(this.endpoint),this.creating.form).then((function(){t.getRecords().then((function(){t.creating.active=!1,t.creating.form={},t.creating.errors=[]}))})).catch((function(e){422===e.response.status&&(t.creating.errors=e.response.data.errors)}))},destroy:function(t){var e=this;window.confirm("Are you sure you want to delete this?")&&axios.delete("".concat(this.endpoint,"/").concat(t)).then((function(){e.selected=[],e.getRecords()})).catch((function(t){}))},isColumnUpdatable:function(t){return this.response.updateable.includes(t)},toggleSelectAll:function(){this.selected.length>0?this.selected=[]:this.selected=n()(this.filteredRecords,"id")}},mounted:function(){this.getRecords()}},m=r(0),f=Object(m.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[r("strong",{staticClass:"mr-auto"},[t._v(t._s(t.response.table))]),t._v(" "),t.response.allow.creation?r("a",{staticClass:"pull-right ml-auto",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.creating.active=!t.creating.active}}},[t._v("\n                "+t._s(t.creating.active?"Cancel":"Add new record")+"\n            ")]):t._e()]),t._v(" "),t.creating.active?r("div",{staticClass:"card card-body my-3"},[r("h5",{staticClass:"card-title"},[t._v("New record")]),t._v(" "),r("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.store(e)}}},[t._l(t.response.createable,(function(e){return r("div",{staticClass:"form-group row",class:{"has-error":t.creating.errors[e.value]}},[r("label",{staticClass:"control-label col-md-4",attrs:{for:e.value}},[t._v("\n                        "+t._s(t.response.custom_columns[e.value]||e.value)+"\n                    ")]),t._v(" "),r("div",{staticClass:"col-md-6"},["text"==e.type?[r("input",{directives:[{name:"model",rawName:"v-model",value:t.creating.form[e.value],expression:"creating.form[row.value]"}],staticClass:"form-control",class:{"is-invalid":t.creating.errors[e.value]},attrs:{type:"text"},domProps:{value:t.creating.form[e.value]},on:{input:function(r){r.target.composing||t.$set(t.creating.form,e.value,r.target.value)}}})]:"textarea"==e.type?[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.creating.form[e.value],expression:"creating.form[row.value]"}],staticClass:"form-control",class:{"is-invalid":t.creating.errors[e.value]},domProps:{value:t.creating.form[e.value]},on:{input:function(r){r.target.composing||t.$set(t.creating.form,e.value,r.target.value)}}})]:"select"==e.type?[r("select",{directives:[{name:"model",rawName:"v-model",value:t.creating.form[e.value],expression:"creating.form[row.value]"}],staticClass:"form-control custom-select",class:{"is-invalid":t.creating.errors[e.value]},on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.creating.form,e.value,r.target.multiple?a:a[0])}}},[t._l(e.options,(function(e){return[e.children.length?[r("optgroup",{attrs:{label:e.name}},t._l(e.children,(function(e){return r("option",{attrs:{disabled:"true"!=String(e.usable).toLowerCase()},domProps:{value:e.value}},[t._v("\n                                                "+t._s(e.name)+"\n                                            ")])})),0)]:[r("option",{attrs:{disabled:"true"!=String(e.usable).toLowerCase()},domProps:{value:e.value}},[t._v("\n                                            "+t._s(e.name)+"\n                                        ")])]]}))],2)]:t._e(),t._v(" "),t.creating.errors[e.value]?r("div",{staticClass:"invalid-feedback"},[r("strong",[t._v(t._s(t.creating.errors[e.value][0]))])]):t._e()],2)])})),t._v(" "),t._m(0)],2)]):t._e(),t._v(" "),r("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.getRecords(e)}}},[r("fieldset",[r("label",{staticClass:"control-label",attrs:{for:"dataTableSearch"}},[t._v("Search")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"form-group col-sm-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.search.column,expression:"search.column"}],staticClass:"form-control custom-select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"column",e.target.multiple?r:r[0])}}},t._l(t.response.displayable,(function(e){return r("option",{domProps:{value:e}},[t._v("\n                                "+t._s(e)+"\n                            ")])})),0)]),t._v(" "),r("div",{staticClass:"form-group col-sm-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.search.operator,expression:"search.operator"}],staticClass:"form-control custom-select",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"operator",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"equals"}},[t._v("=")]),t._v(" "),r("option",{attrs:{value:"contains"}},[t._v("contains")]),t._v(" "),r("option",{attrs:{value:"starts_with"}},[t._v("starts with")]),t._v(" "),r("option",{attrs:{value:"ends_with"}},[t._v("ends with")]),t._v(" "),r("option",{attrs:{value:"greater_than"}},[t._v("greater than")]),t._v(" "),r("option",{attrs:{value:"greater_equal_to"}},[t._v("greater than or equal to")]),t._v(" "),r("option",{attrs:{value:"less_than"}},[t._v("less than")]),t._v(" "),r("option",{attrs:{value:"less_equal_to"}},[t._v("less than or equal to")])])]),t._v(" "),r("div",{staticClass:"form-group col-sm-6"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.search.value,expression:"search.value"}],staticClass:"form-control",attrs:{type:"text",id:"dataTableSearch"},domProps:{value:t.search.value},on:{input:function(e){e.target.composing||t.$set(t.search,"value",e.target.value)}}}),t._v(" "),t._m(1)])])])])]),t._v(" "),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-sm-10"},[r("label",{staticClass:"control-label",attrs:{for:"filter"}},[t._v("\n                    Quick search current results\n                ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.quickSearchQuery,expression:"quickSearchQuery"}],staticClass:"form-control",attrs:{type:"text",id:"filter"},domProps:{value:t.quickSearchQuery},on:{input:function(e){e.target.composing||(t.quickSearchQuery=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"col-sm-2"},[r("label",{staticClass:"control-label",attrs:{for:"limit"}},[t._v("Per page")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.limit,expression:"limit"}],staticClass:"form-control custom-select",attrs:{id:"limit"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.limit=e.target.multiple?r:r[0]},t.getRecords]}},[r("option",{attrs:{value:"15"}},[t._v("15")]),t._v(" "),r("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),r("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),r("option",{attrs:{value:"100"}},[t._v("100")]),t._v(" "),r("option",{attrs:{value:""}},[t._v("All")])])])])]),t._v(" "),r("div",{staticClass:"card-body"},[t.response.data.length?t._e():r("p",{staticClass:"card-text my-2"},[t._v("No records found.")]),t._v(" "),t.selected.length?r("div",{staticClass:"clearfix"},[r("div",{staticClass:"btn-group"},[t._m(2),t._v(" "),r("div",{staticClass:"dropdown-menu"},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.destroy(t.selected)}}},[t._v("Delete")])])])]):r("p",{staticClass:"card-text"},[t._v("Select records to access more options")])]),t._v(" "),t.response.data.length?r("table",{staticClass:"table table-responsive-sm table-hover table-outline mb-0"},[r("thead",{staticClass:"thead-light"},[r("tr",[t.canSelectItems?r("th",[r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.filteredRecords.length===t.selected.length},on:{change:t.toggleSelectAll}}),t._v(" "),r("span",{staticClass:"custom-control-label"})])]):t._e(),t._v(" "),t._l(t.response.displayable,(function(e){return r("th",[r("span",{staticClass:"sortable",on:{click:function(r){return t.sortBy(e)}}},[t._v(t._s(t.response.custom_columns[e]||e))]),t._v(" "),t.sort.key===e?r("div",{staticClass:"arrow",class:{"arrow--asc":"asc"===t.sort.order,"arrow--desc":"desc"===t.sort.order}}):t._e()])})),t._v(" "),t._l(t.response.appendable,(function(t){return r("th",[r("span")])})),t._v(" "),t.response.allow.updating?r("th",[t._v(" ")]):t._e(),t._v(" "),t.response.allow.deletion?r("th",[t._v(" ")]):t._e()],2)]),t._v(" "),r("tbody",t._l(t.filteredRecords,(function(e){return r("tr",[t.canSelectItems?r("td",[r("label",{staticClass:"custom-control custom-checkbox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.selected)?t._i(t.selected,e.id)>-1:t.selected},on:{change:function(r){var a=t.selected,s=r.target,o=!!s.checked;if(Array.isArray(a)){var n=e.id,i=t._i(a,n);s.checked?i<0&&(t.selected=a.concat([n])):i>-1&&(t.selected=a.slice(0,i).concat(a.slice(i+1)))}else t.selected=o}}}),t._v(" "),r("span",{staticClass:"custom-control-label"})])]):t._e(),t._v(" "),t._l(e,(function(a,s){return r("td",[t.editing.id===e.id&&t.isColumnUpdatable(s)?[r("div",{staticClass:"form-group",class:{"has-error":t.editing.errors[s]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.editing.form[s],expression:"editing.form[column]"}],staticClass:"form-control",class:{"is-invalid":t.editing.errors[s]},attrs:{type:"text"},domProps:{value:t.editing.form[s]},on:{input:function(e){e.target.composing||t.$set(t.editing.form,s,e.target.value)}}}),t._v(" "),t.editing.errors[s]?r("div",{staticClass:"invalid-feedback"},[r("strong",[t._v(t._s(t.editing.errors[s][0]))])]):t._e()])]:[t._v("\n                    "+t._s(a)+"\n                ")]],2)})),t._v(" "),t.response.allow.updating?r("td",[t.editing.id!==e.id?r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.edit(e)}}},[t._v("\n                    Quick edit\n                ")]):t._e(),t._v(" "),t.editing.id===e.id?[r("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.update(e)}}},[t._v("Save")]),t._v(" "),r("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.editing.id=null}}},[t._v("Cancel")])]:t._e()],2):t._e(),t._v(" "),t.response.allow.deletion?r("td",[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.destroy(e.id)}}},[t._v("Delete")])]):t._e()],2)})),0)]):t._e(),t._v(" "),t.response.data.length?r("div",{staticClass:"card-body"},[t._v("\n        Pagination currently not available\n    ")]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-md-6 offset-md-4"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Save")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Search")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"btn btn-outline-primary dropdown-toggle",attrs:{href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                    With selected "),e("span",{staticClass:"caret"})])}],!1,null,null,null);e.default=f.exports}}]);